
<!doctype html>
<html lang="en" class="h-100">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="perov93">
    <meta name="generator" content="perov93">
    <title>Проверка на статус - Перов</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/sticky-footer-navbar/">
    
    <!-- FavIcon -->
    <link rel="shortcut icon" type="image/png" href="chart.png"/>
    <link rel="shortcut icon" type="image/png" href="chart.png"/>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="https://www.gstatic.com/firebasejs/6.6.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.6.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.6.2/firebase-firestore.js"></script>
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <!-- Custom styles for this template -->
    <link href="style.css" rel="stylesheet">
  </head>
  <body class="d-flex flex-column h-100" onload="startTime()">
    <header>
  <!-- Fixed navbar -->
  <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
    <a class="navbar-brand" href="#">Status Check</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="mailto:pavelperov93@gmail.com">pavelperov93@gmail.com</a>
        </li>
        <li class="nav-item">
          <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">+359 896 577 570</a>
        </li>
      </ul>
      <form class="form-inline mt-2 mt-md-0">
        <input class="form-control mr-sm-2" type="text" id="myInput" onkeyup="myFunction()" placeholder="Search" aria-label="Search">
        
      </form>
    </div>
  </nav>
</header>

<!-- Begin page content -->
<main role="main" class="flex-shrink-0">
  <div class="container">
    <div class="alert alert-primary" role="alert">
      Кликни върху даден ред, за подробна информация.
    </div>
    <div class="alert alert-warning" role="alert">
      Използвайте ID номер изпратен към вас, за по - лесно търсене. ID номера се образува от първите четири цифри от датата на поръчка(dd/mm). Следващите символи се образуват от темата на принта
      Напр. 2608_boat
    </div>
    
    <p id='showCD'></p>
    <div class="table-responsive">
    <table class="table table-striped" id="demo"></table>
    
  </div>
   
  </div>
</main>

<footer class="footer mt-auto py-3">
  <div class="container">
      
    <span class="text-muted">Проверка на статус на поръчка</span>
    <br>
    <span class="total-sum" id="result"></span>
    <span class="date-clock" id="date"></span>
    <br>
    <span class="clock" id="clock"></span>
    
  </div>
</footer>
<script>
    var x,xmlhttp,xmlDoc
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET", "cd_catalog.xml", false);
    xmlhttp.send();
    xmlDoc = xmlhttp.responseXML; 
    x = xmlDoc.getElementsByTagName("CD");
    table="<tr><th>ID</th><th>DATE</th><th>CLIENT</th><th>PROJECT</th><th>PRICE</th><th>STATUS</th></tr>";
    for (i = 0; i <x.length; i++) { 
      table += "<tr onclick='displayCD(" + i + ")'><td>";
      table += x[i].getElementsByTagName("ID")[0].childNodes[0].nodeValue;
      table += "</td><td>";
      table +=  x[i].getElementsByTagName("DATE")[0].childNodes[0].nodeValue;
      table += "</td><td>";
      table +=  x[i].getElementsByTagName("CLIENT")[0].childNodes[0].nodeValue;
      table += "</td><td>";
      table +=  x[i].getElementsByTagName("PROJECT")[0].childNodes[0].nodeValue;
      table += "</td><td class='count-me'>";
      table +=  x[i].getElementsByTagName("PRICE")[0].childNodes[0].nodeValue;
      table += "</td><td class='status'>";
      table +=  x[i].getElementsByTagName("STATUS")[0].childNodes[0].nodeValue;
      table += "</td></tr>";
    }
    document.getElementById("demo").innerHTML = table;
    
    function displayCD(i) {
      document.getElementById("showCD").innerHTML =
      "ID: " +
      x[i].getElementsByTagName("ID")[0].childNodes[0].nodeValue +
      "<br>Клиент: " +
      x[i].getElementsByTagName("CLIENT")[0].childNodes[0].nodeValue +
      "<br>Цена: " + 
      x[i].getElementsByTagName("PRICE")[0].childNodes[0].nodeValue +
      "<br>Бележки: " + 
      x[i].getElementsByTagName("NOTES")[0].childNodes[0].nodeValue;
    }
    </script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
      <script>window.jQuery || document.write('<script src="/docs/4.3/assets/js/vendor/jquery-slim.min.js"><\/script>')</script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous"></script>
      <script>
          function myFunction() {
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("myInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("demo");
            tr = table.getElementsByTagName("tr");
            for (i = 0; i < tr.length; i++) {
              td = tr[i].getElementsByTagName("td")[0];
              if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                  tr[i].style.display = "";
                } else {
                  tr[i].style.display = "none";
                }
              }       
            }
          }
          </script>
         <script>
            function startTime() {
              var today = new Date();
              var h = today.getHours();
              var m = today.getMinutes();
              var s = today.getSeconds();
              m = checkTime(m);
              s = checkTime(s);
              document.getElementById('date').innerHTML =
              h + ":" + m + ":" + s;
              var t = setTimeout(startTime, 500);
            }
            function checkTime(i) {
              if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
              return i;
            }
            </script>
            <script language="javascript" type="text/javascript">
              var tds = document.getElementById('demo').getElementsByTagName('td');
              var sum = 0;
              for(var i = 0; i < tds.length; i ++) {
                  if(tds[i].className == 'count-me') {
                      sum += isNaN(tds[i].innerHTML) ? 0 : parseFloat(tds[i].innerHTML);
                  }
              }
             // document.getElementById('demo').innerHTML += '<tr id="result"><td style="font-weight: 600">Total: ' + sum + ' лв.' + '</td></tr>';
          </script>
          <script>
          var today = new Date();
var dd = String(today.getDate()).padStart(2, '0');
var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
var yyyy = today.getFullYear();

today = dd+ '/' + mm + '/' + yyyy;
document.getElementById('clock').innerHTML += today;
          </script>
           <!-- The core Firebase JS SDK is always required and must be listed first -->
 

  <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyAdgyyH2bDT_vpf2QpdBeu9IYfPck02_eY",
      authDomain: "perov-crm.firebaseapp.com",
      databaseURL: "https://perov-crm.firebaseio.com",
      projectId: "perov-crm",
      storageBucket: "perov-crm.appspot.com",
      messagingSenderId: "196981583808",
      appId: "1:196981583808:web:95cb13fe777f75d6016225"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
    <script> 
    $(document).ready(function() {
   $('.status:contains("Завършено.")').css('color', 'green');
  $('.status:contains("Очаква одобрение")').css('color', 'yellow');
      
});
    </script>
  <script src="app.js"></script>
  
    

    </body>
</html>

